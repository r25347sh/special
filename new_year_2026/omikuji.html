<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ˜¥ãŠã¿ãã˜</title>
    <link rel="stylesheet" href="all.css">
    <link rel="stylesheet" href="omikuji.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="main.html">TOP</a></li>
            <li><a href="2025.html">æŒ¯ã‚Šè¿”ã‚Š</a></li>
            <li><a href="omikuji.html" class="active">ãŠã¿ãã˜</a></li>
            <li><a href="quiz.html">ã‚¯ã‚¤ã‚º</a></li>
        </ul>
    </nav>

    <div class="container">
        <h2>ğŸ”® 2026 é‹å‹¢å ã„</h2>
        <p>å¿ƒã‚’è½ã¡ç€ã‹ã›ã¦å¼•ã„ã¦ã­</p>

        <div class="omikuji-container">
            <div id="box-icon" class="omikuji-box-icon">ğŸ—³ï¸</div>
            
            <div id="result-display" class="result-area">
                <div id="result-title" class="result-title"></div>
                <div id="result-desc" class="result-desc"></div>
            </div>

            <button id="draw-btn" onclick="startOmikuji()" class="btn">ãŠã¿ãã˜ã‚’å¼•ãï¼</button>
        </div>
    </div>

    <script>
        // ãŠã¿ãã˜ãƒ‡ãƒ¼ã‚¿ã¨ç¢ºç‡ï¼ˆweightãŒå¤§ãã„ã»ã©å‡ºã‚„ã™ã„ï¼‰
        // weightã®åˆè¨ˆã¯100ã˜ã‚ƒãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ãŒã€åˆè¨ˆã«å¯¾ã™ã‚‹å‰²åˆã§æ±ºã¾ã‚Šã¾ã™ã€‚
        const omikujiData = [
            { 
                type: "å¤§å‰ âœ¨", 
                text: "2026å¹´ã¯ç„¡æ•µï¼å¸­æ›¿ãˆã‚‚ãƒ†ã‚¹ãƒˆã‚‚æ€ã„é€šã‚Šã€‚", 
                weight: 10, // ç¢ºç‡ä½ã‚ï¼ˆãƒ¬ã‚¢ï¼‰
                isSpecial: true 
            },
            { 
                type: "ä¸­å‰ ğŸ´", 
                text: "ãƒãƒ©ãƒ³ã‚¹è‰¯ã—ï¼ç¨‹ã‚ˆãã‚µãƒœã£ã¦ç¨‹ã‚ˆãé ‘å¼µã‚ã†ã€‚", 
                weight: 20 
            },
            { 
                type: "å°å‰ ğŸ‘", 
                text: "å°ã•ãªãƒ©ãƒƒã‚­ãƒ¼ãŒç¶šãäºˆæ„Ÿã€‚è³¼è²·ã®ãƒ‘ãƒ³ãŒå£²ã‚Šåˆ‡ã‚Œã¦ãªã„ã¨ã‹ã€‚", 
                weight: 35 // ä¸€ç•ªå‡ºã‚„ã™ã„
            },
            { 
                type: "å‰ ğŸ˜Š", 
                text: "æ™®é€šãŒä¸€ç•ªï¼å¹³å’Œãªä¸€å¹´ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚", 
                weight: 25 
            },
            { 
                type: "æœ«å‰ ğŸŒ±", 
                text: "ã“ã‚Œã‹ã‚‰é‹æ°—ä¸Šæ˜‡ã€‚ä»Šã¯åŠ›ã‚’è“„ãˆã‚‹ã¨ãï¼ˆå¯ã‚‹ãªã‚ˆï¼‰ã€‚", 
                weight: 10 
            },
            { 
                type: "å‡¶ ğŸ˜±", 
                text: "é€†ã«ãƒ©ãƒƒã‚­ãƒ¼ï¼ï¼Ÿæ°—ã‚’å¼•ãç· ã‚ã¦ã„ã‘ã°å¤§ä¸ˆå¤«ï¼", 
                weight: 5 // ã‹ãªã‚Šãƒ¬ã‚¢
            }
        ];

        let isDrawing = false; // é€£æ‰“é˜²æ­¢ç”¨ãƒ•ãƒ©ã‚°

        function startOmikuji() {
            if (isDrawing) return; // å®Ÿè¡Œä¸­ãªã‚‰ä½•ã‚‚ã—ãªã„
            isDrawing = true;

            const boxIcon = document.getElementById('box-icon');
            const resultDisplay = document.getElementById('result-display');
            const btn = document.getElementById('draw-btn');

            // 1. çµæœã‚’éš ã—ã¦ç®±ã‚’æºã‚‰ã™
            resultDisplay.style.display = 'none';
            boxIcon.classList.add('shaking'); // CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            btn.innerText = "ã‚¬ãƒ©ã‚¬ãƒ©ä¸­...";
            btn.style.backgroundColor = "#ccc"; // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹è‰²ã«

            // 2. 1.5ç§’å¾Œã«çµæœã‚’è¡¨ç¤º
            setTimeout(() => {
                // æºã‚Œã‚’æ­¢ã‚ã‚‹
                boxIcon.classList.remove('shaking');

                // ç¢ºç‡è¨ˆç®—ã—ã¦çµæœã‚’å–å¾—
                const result = getWeightedResult();

                // ç”»é¢ã«è¡¨ç¤º
                document.getElementById('result-title').innerText = result.type;
                document.getElementById('result-desc').innerText = result.text;
                
                // å¤§å‰ãªã‚‰èµ¤ãå…‰ã‚‰ã›ã‚‹ãªã©ã®ã‚¯ãƒ©ã‚¹è¿½åŠ 
                if(result.isSpecial) {
                    document.getElementById('result-title').classList.add('super-lucky');
                } else {
                    document.getElementById('result-title').classList.remove('super-lucky');
                }

                resultDisplay.style.display = 'block'; // è¡¨ç¤º

                // ãƒœã‚¿ãƒ³ã‚’æˆ»ã™
                btn.innerText = "ã‚‚ã†ä¸€åº¦å¼•ã";
                btn.style.backgroundColor = ""; // è‰²ã‚’æˆ»ã™
                isDrawing = false; // ãƒ­ãƒƒã‚¯è§£é™¤

            }, 1500); // 1500ãƒŸãƒªç§’ = 1.5ç§’å¾…ã¤
        }

        // ç¢ºç‡ã®é‡ã¿ã¥ã‘æŠ½é¸ãƒ­ã‚¸ãƒƒã‚¯
        function getWeightedResult() {
            // é‡ã¿ã®åˆè¨ˆã‚’è¨ˆç®—
            let totalWeight = 0;
            for (let i = 0; i < omikujiData.length; i++) {
                totalWeight += omikujiData[i].weight;
            }

            // 0 ã€œ totalWeight ã®é–“ã§ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°ã‚’æ±ºã‚ã‚‹
            let random = Math.floor(Math.random() * totalWeight);

            // ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°ãŒã©ã®ç¯„å›²ã«ã‚ã‚‹ã‹èª¿ã¹ã‚‹
            let currentWeight = 0;
            for (let i = 0; i < omikujiData.length; i++) {
                currentWeight += omikujiData[i].weight;
                if (random < currentWeight) {
                    return omikujiData[i];
                }
            }
        }
    </script>
</body>
</html>
